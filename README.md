# PLDI 2020 AEC, Paper\# 471

## Goals of the artifact

In our paper, we evaluated the following about Albatross (`Section 7`):

1. End-to-End: we ran Albatross on the flat CSG outputs of a mesh decompiler
   (Reincarnate). The results are in `Table 2`.

2. Scalability: we evaluated Albatross on a large dataset of models scraped
   from a popular online repository (Thingiverse). The results are in `Figure
   14` (first three box plots).

3. Sensitivity: we evaluated the usefulness of Albatross's two main features:
   CAD rewrites and Inverse Transformations. The results are in `Figure 14`
   (last two box plots).

In support of these results, this artifact reproduces `Table 2` and `Figure
14`. In addition, it also generates the output programs in `Figure 15` that are
used in the case studies.


This document contains the following parts:

* System requirements

* Getting started

* How to run Albatross

* How to set up Albatross on a different machine (this is also how we set up
  the VM)

* Notes and remarks

## System requirements

* We provide the artifact as a virtual machine image. To open it you need
  virtual box version `6.1.2`, which can be downloaded
  [here](https://www.virtualbox.org/wiki/Downloads).

* In the machine where we tested the VM, we have 16 GB RAM and 250 GB hard
  disk.

## Getting started

* Please download the `.ova` file from the link and open it with Virtual Box by
  going to `File -> import appliance` and giving the path to the `.ova` file
  and clicking on `continue`. In the next window that pops up, click on
  `Import`. It should take a few minutes to import.

* Next, please open the virtual machine image in virtual box by clicking on the
  green `Start` button.

* Login is automatic, but in case needed, the password is: `pldi2020`.

* The terminal should be open at startup. The project repository is already
  cloned.  Navigate to the `albatross` directory.  All the required packages
  are already installed. Type `make`.


## Running the tools

### Reproducing Table 2
Navigate to the directory that contains the `Makefile` and
type the following three commands one after the other.

```
$ make aec-table2
$ make aec-table2-nocad
$ make aec-table2-noinv
```
Each of them should finish within 5 minutes.
After they all finish running, navigate to the `scripts` directory
and type `python table2`. To view the content of the table, type
`cat ../out/aec-table2/table2.csv | column -t -s,` and compare the numbers
with `Table 2` in the paper.


### Reproducing Figure 14

### Reproducing Figure 15 programs
Navigate to the directory that contains the `Makefile` and
type `make aec-fig15`. Then look in the `out/aec-fig15` directory. The
optimized programs generated by Albatross are in the files with extensions
`.csexp.opt`. There should be 6 such files. Open them and compare the
content with the programs listed in `Figure 15` of the paper.

## Setup instructions (for setting up Albatross on a different machine that runs Ubuntu 18.04.4 LTS)

* Install rust. Type `curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh`
  in the terminal and follow the subsequent instructions. The version we used is `1.41.0`.
  See`https://www.rust-lang.org/tools/install` for more information.

* Make sure you configure your current shell by typing: `source $HOME/.cargo/env`
  (the Rust installation will prompt you to do this).

* Install make by typing: `sudo apt-get install make`

* Install g++ by typing: `sudo apt-get install g++`

* Install jq by typing: `sudo apt-get install jq`
 
* Install [CGAL](https://www.cgal.org/download/linux.html) by typing
  `sudo apt-get install libcgal-dev`

* Install [OpenSCAD](https://www.openscad.org/).
We followed the instructions [here](http://ubuntuhandbook.org/index.php/2019/01/install-openscad-ubuntu-18-10-18-04/).
In short: the following steps should suffice:
```
$ sudo add-apt-repository ppa:openscad/releases
$ sudo apt-get update
$ sudo apt-get install openscad
```

* Clone the repo [here](TODO AEC REPO)

* Navigate to the project directory where the `Makefile` is, and type `make` to build it.

## Notes and remarks

Albatross is implemented in [Rust](https://www.rust-lang.org/).
As mentioned in `Section 6` of the paper,
it uses [OpenSCAD](https://www.openscad.org/)
to compile CSG programs to triangular meshes, and
[CGAL](https://www.cgal.org/) to compute the
Hausdorff distance between two meshes.

