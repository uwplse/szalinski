wall   =  2; // [1:0.05:3]
rim    =  4; // [2:0.05:6]
height = 15; // [10:1:15]
index  =  0; // [0,1,2,3,4,5]
spikes =  6; // [5,6]

$fn=40;

// path
star_5=[
// size 10 / 20
[[ 0.0,10.0],	[11.8,16.2],
[ 9.5, 3.1],	[19.0,- 6.2],
[ 5.9,- 8.1],	[ 0.0,-20.0],
[- 5.9,- 8.1],	[-19.0,- 6.2],
[- 9.5, 3.1],	[-11.8,16.2]
],
// size 15 / 30
[[ 0.0,15.0],	[17.6,24.3],
[14.3, 4.6],	[28.5,- 9.3],
[ 8.8,-12.1],	[ 0.0,-30.0],
[- 8.8,-12.1],	[-28.5,- 9.3],
[-14.3, 4.6],	[-17.6,24.3],
],
// size 20 / 40
[[ 0.0,20.0],	[23.5,32.4],
[19.0, 6.2],	[38.0,-12.4],
[11.8,-16.2],	[ 0.0,-40.0],
[-11.8,-16.2],	[-38.0,-12.4],
[-19.0, 6.2],	[-23.5,32.4],
],
// size 25 / 50
[[ 0.0,25.0],	[29.4,40.5],
[23.8, 7.7],	[47.6,-15.5],
[14.7,-20.2],	[ 0.0,-50.0],
[-14.7,-20.2],	[-47.6,-15.5],
[-23.8, 7.7],	[-29.4,40.5],
],
// size 30/ 60
[[ 0.0,30.0],	[35.3,48.5],
[28.5, 9.3],	[57.1,-18.5],
[17.6,-24.3],	[ 0.0,-60.0],
[-17.6,-24.3],	[-57.1,-18.5],
[-28.5, 9.3],	[-35.3,48.5],
]];

star_6=[
// size 10 / 20
[[ 0.0,10.0],	[10.0,17.3],
[ 8.7, 5.0],	[20.0, 0.0],
[ 8.7,- 5.0],	[10.0,-17.3],
[ 0.0,-10.0],	[-10.0,-17.3],
[- 8.7,- 5.0],	[-20.0, 0.0],
[- 8.7, 5.0],	[-10.0,17.3]
],
// size 15 / 30
[[ 0.0,15.0],	[15.0,26.0],
[13.0, 7.5],	[30.0, 0.0],
[13.0,- 7.5],	[15.0,-26.0],
[ 0.0,-15.0],	[-15.0,-26.0],
[-13.0,- 7.5],	[-30.0, 0.0],
[-13.0, 7.5],	[-15.0,26.0]
],
// size 20 / 40
[[ 0.0,20.0],	[20.0,34.6],
[17.3,10.0],	[40.0, 0.0],
[17.3,-10.0],	[20.0,-34.6],
[ 0.0,-20.0],	[-20.0,-34.6],
[-17.3,-10.0],	[-40.0, 0.0],
[-17.3,10.0],	[-20.0,34.6]
],
// size 25 / 50
[[ 0.0,25.0],	[25.0,43.3],
[21.7,12.5],	[50.0, 0.0],
[21.7,-12.5],	[25.0,-43.3],
[ 0.0,-25.0],	[-25.0,-43.3],
[-21.7,-12.5],	[-50.0, 0.0],
[-21.7,12.5],	[-25.0,43.3]
],
// size 30/ 60
[[ 0.0,30.0],	[30.0,52.0],
[26.0,15.0],	[60.0, 0.0],
[26.0,-15.0],	[30.0,-52.0],
[ 0.0,-30.0],	[-30.0,-52.0],
[-26.0,-15.0],	[-60.0, 0.0],
[-26.0,15.0],	[-30.0,52.0]
]];

all();

module all()
{
    /*
    cake(star_5[0],height);
    cake(star_5[1],height);
    cake(star_5[2],height);
    cake(star_5[3],height);
    cake(star_5[4],height);
    */
    /*
    cake(star_6[0],height);
    cake(star_6[1],height);
    cake(star_6[2],height);
    cake(star_6[3],height);
    cake(star_6[4],height);
    */
    if(spikes == 5)
    {
        cake(star_5[index],height);
    }
    if(spikes == 6)
    {
        cake(star_6[index],height);
    }
}

module layer(poly, h, b)
{
    linear_extrude(h)
        difference()
        {
            offset(r=b)   polygon(poly);
            /*offset(r=0-b)*/ polygon(poly);
        }
}

 

module cake(path, height)
{
    // correction fix to avoid needles infill and movements
    fix = 0.01;
    
    // Basis
    layer(path,wall,rim-fix);

    // wall
    layer(path,height,wall-fix);

    // cutter
    layer(path,height+1,wall*2/3-fix);
    layer(path,height+2,wall/2-fix);
    layer(path,height+3,wall/4-fix);

}

